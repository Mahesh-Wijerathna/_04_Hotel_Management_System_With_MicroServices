(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[926],{7119:function(e,n,t){Promise.resolve().then(t.bind(t,7693))},7693:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return o}});var i=t(7437),a=t(2265),l=t(3464);function o(){let[e,n]=a.useState([]),[t,o]=a.useState(null),c="http://localhost:8000",d=localStorage.getItem("jwtToken"),s=d?{Authorization:"Bearer ".concat(d)}:{};async function r(){try{let e=await l.Z.get("".concat(c,"/api/v1/bookings/me"),{headers:{...s}});n(e.data||[])}catch(n){var e,t;o((null==n?void 0:null===(t=n.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||"Load failed (login needed)")}}async function u(e){try{await l.Z.patch("".concat(c,"/api/v1/bookings/").concat(e,"/cancel"),null,{headers:{...s}}),await r()}catch(e){var n,t;o((null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.detail)||"Cancel failed")}}return a.useEffect(()=>{r()},[]),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{children:"My Bookings"}),t&&(0,i.jsx)("p",{children:t}),(0,i.jsx)("ul",{children:e.map(e=>(0,i.jsxs)("li",{children:["#",e.id," – service ",e.service_id," – qty ",e.quantity," – ",e.scheduled_for," – ",e.status,(0,i.jsx)("button",{style:{marginLeft:8},onClick:()=>u(e.id),children:"Cancel"})]},e.id))})]})}}},function(e){e.O(0,[464,971,117,744],function(){return e(e.s=7119)}),_N_E=e.O()}]);