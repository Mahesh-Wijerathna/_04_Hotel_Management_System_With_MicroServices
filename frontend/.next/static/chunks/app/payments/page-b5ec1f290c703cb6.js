(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74],{2275:function(e,t,n){Promise.resolve().then(n.bind(n,3))},3:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n(7437),i=n(2265),l=n(3464);function o(){let[e,t]=i.useState([]),[n,o]=i.useState(null),[d,s]=i.useState(""),x="http://localhost:8000",c=localStorage.getItem("jwtToken"),r=c?{Authorization:"Bearer ".concat(c)}:{};async function u(){try{let e=await l.Z.get("".concat(x,"/api/v1/payments/me"),{headers:{...r}});t(e.data||[])}catch(t){var e,n;o((null==t?void 0:null===(n=t.response)||void 0===n?void 0:null===(e=n.data)||void 0===e?void 0:e.detail)||"Load failed (login needed)")}}async function h(){try{o(null);let e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});await l.Z.post("".concat(x,"/api/v1/payments"),{booking_id:Number(d),method:"card"},{headers:{...r,"Idempotency-Key":e}}),await u()}catch(n){var e,t;o((null==n?void 0:null===(t=n.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||"Payment failed")}}return i.useEffect(()=>{u()},[]),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"My Payments"}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,a.jsx)("input",{placeholder:"Booking ID",value:d,onChange:e=>s(e.target.value)}),(0,a.jsx)("button",{onClick:h,children:"Pay"})]}),n&&(0,a.jsx)("p",{children:n}),(0,a.jsx)("ul",{children:e.map(e=>(0,a.jsxs)("li",{children:["#",e.id," – booking ",e.booking_id," – ",e.status]},e.id))})]})}}},function(e){e.O(0,[464,971,117,744],function(){return e(e.s=2275)}),_N_E=e.O()}]);